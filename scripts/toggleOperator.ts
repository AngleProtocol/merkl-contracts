import { deployments, ethers } from 'hardhat';

import { Distributor, Distributor__factory } from '../typechain';
import { registry } from '@angleprotocol/sdk';

const users = ['0xf4b426A9849933c83041D6554cb39955ddA5c767'];
const operators = ['0xA9DdD91249DFdd450E81E1c56Ab60E1A62651701'];

async function main() {
  let distributor: Distributor;
  const { deployer } = await ethers.getNamedSigners();
  const chainId = (await deployer.provider?.getNetwork())?.chainId;
  console.log('chainId', chainId);
  const distributorAddress = registry(chainId as unknown as number)?.Merkl?.Distributor; // (await deployments.get('DistributionCreator')).address;

  if (!distributorAddress) {
    throw new Error('Manager address not found');
  }

  distributor = new ethers.Contract(
    distributorAddress,
    Distributor__factory.createInterface(),
    deployer,
  ) as Distributor;

  for (const user of users) {
    for (const operator of operators) {
      if ((await distributor.operators(user, operator)).toString() !== '1') {
        console.log(`Toggling operator ${operator} for user ${user}`);
        const res = await (await distributor.connect(deployer).toggleOperator(user, operator)).wait();
        console.log(res.status);
      } else {
        console.log(`Operator ${operator} is already toggled for user ${user}`);
      }
    }
  }

  /**
   * Arbitrum
   * {
    "chainId": 42161,
    "data": "0x71ee95c000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000006000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a131000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a131000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a131000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a131000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a131000000000000000000000000c0c07644631543c3af2fa7230d387c5fa418a13100000000000000000000000000000000000000000000000000000000000000060000000000000000000000005d066d022ede10efa2717ed3d79f22f949f8c1750000000000000000000000003a29cab2e124919d14a6f735b6033a3aad2b260f000000000000000000000000900f717ea076e1e7a484ad9dd2db81ceec60ebf1000000000000000000000000958d208cdf087843e9ad98d23823d32e17d723a1000000000000000000000000b5c064f955d8e7f38fe0460c556a72987494ee170000000000000000000000000b3f868e0be5597d5db7feb59e1cadbb0fdda50a000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000002edcf4dede37ba91000000000000000000000000000000000000000000000032b486c6f9d4e36d357d0000000000000000000000000000000000000000000004d64dfbc8e61a495e0100000000000000000000000000000000000000000000021a4bd73dfef17ab8c900000000000000000000000000000000000000000000001ec8f531d430132f5b000000000000000000000000000000000000000000000044f97e735c7304ea04000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000002c000000000000000000000000000000000000000000000000000000000000004c0000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000b40000000000000000000000000000000000000000000000000000000000000000fd332446dbf7e6c6811a713e1a2d2fed467112aa47fe771da9708481c55b11b692b565a00af298c6d96164ded9c2f4707c3cf010040059c54ff1c62c30b17991f5f4421227aaa126e3e10fa926ec00fa7404dbd46be3fcd3a58eb18bbd217caaa8dd6a280b1326e0b60470ef440f32852f5f8ed426f49f062d74c717289f0c14955c13050262eaf8cfc5e4be9b7d394cbe51caf388936c908717d21deb3876866b2a5c89e4667859f967322d4821740b3f7355a7f23116239af8f950c69bf3402bded31b79aef1257b19109adf036bb990c9dcb6b082c5ddbab3455d2fb4c7b9bf896bc0e671e746dff783ac3b2b4cc18316b6747a806502007265740294f9c93506462d0a13f83c3425bdb0db7df59d6605d960e689659e3ffb7f10133b79996933a5452a3333693441fc60cd37b6d26ab44e3ae895a4a8aef3d5a537fd9c213d35c8b45aaf7b2b8e24818a6be7fbeb70894de4c174d24b593a768e4b61dd85de40307a091f9daff0099a2b89a70d57c844526721ce36eef6b206db07eb4b362b91b29634b1e446237f4c1b3482bb319f6310e4aa0e368a7d54a533cd8f7befa681e3d387c8ccb4a8d38f6043772969ebeb825cfdcab4380dcab2b7d9f5d14df28dfe08ad9a0928c43495d4873c867cadc0af66eebaeba9683c08a5c39ad4ab0000000000000000000000000000000000000000000000000000000000000000fdd0033af62c119eaeac622bb665c5cb9d69b2bf885cda4f675425e6c628b372ae93243a4b740aa739f2d68ec2aa01c059b73a7f2bdd7345bbc9acba903233e4ce2a3acd2f4c976a10910e9b9eb15352396f4b3ba3bb6b640faa203b75ada35c0220d5493b6408bf50d7df493c49eed22f3ae88f2ecddaa188fa9edc5cf1e409d15fde441edd97e90a154ffadad5d940f1ba186e647cbd6cb6b59a014e844d625368ffe3ea1ca1d619ad4e24dc59dc4e73ba752caf80a90731fc6629caca24779bb451c14ffdbc9a1c38de21c60278aa5fb0d3f59de8c4f126442b2ee50caebb264391caf127a0262f0e966d9257c2d369c1af6032e47998d07cb81547c6e66de72ccaf7df1052f53e478a4489e362a6aca4afbdbbef7b88ff434b4f9e683cf9ec6d5b0b7cf54faad73929722dc2ef0ac5453de1b285759623c5e146968d3e33cba301887ee072afe662b3d5dd012e63118083d661a4b013752da38a08d6a4cb0dbc5f35e83312f5abccf772bce607aab5c816e891b3351c6fd40209ea681338de929bcf31dff15eb3bcc05a28b831a14fd91d53ecaa78f36ce066bc1c873547b681e3d387c8ccb4a8d38f6043772969ebeb825cfdcab4380dcab2b7d9f5d14df28dfe08ad9a0928c43495d4873c867cadc0af66eebaeba9683c08a5c39ad4ab000000000000000000000000000000000000000000000000000000000000000112ff0261f44e8c0973d24ef72475a74c4e2f76a11f9a6350eae01a134ff039699de1d6182f594152ed2fbafbb272cdc3419d3f9faf29155d4763d07d780706e15619b3fdbcfe4170a3207e3c837936b0c2d3f200946519f6f7972d9aee2113d5cfe5cddd3c20d02636e399ee6700b5812c7397f54b8b20657116af0e6010a76c93efc4d34941ac9cc24e93949b35cc1a45e8065d3adfb85b95dd7e2612dc911823ec0854e46ffe725c6988d73bf93e1c155033e89847e6149f8b6f5f354f1b49009068b696aa9283a5aeda022a82e43bdb5479a2447ae5722177a93bdd3f558d657604d884e71c6968a6acfc517ab1855f941cfe3acde6f865a5450579ad53c5350969927fca140552f19b389f56d674ef1d64bd9cbd9fd26e65b426cf7011683b6ab3a997786f89bd1c0eee347cbd3d73d2ec3caef29ce0c71980cfe73904f300d00742a2e2e41386d5214a7295733311d031d25346ac9662bd51c3ca1d8b8924504678567062c5230f86cf41047fad48ea697ad429255f298517c31fc1026ccb189c97addec890a9b8ff4054be624d32df0251fe0a843e7fcb2cc419ceb83be506b8b449b689e3090e5304da8fffe0c649787c5211ce1e5c703ab908035f839027ec22b17f1a4e89316b2da13c389a5172ce19e4952e7738dfd8845f5a89bfd93f2d56f172566d4ae9ad002dc775d2e2a34d08b6de92eafe774672b0bb083dab24bf488f23587a6ce6824dc0bd910aab3612127c9972fd3fcf6ad9bf1ce9da4000000000000000000000000000000000000000000000000000000000000000fe57c03b765d74bf08dc55301a856d267a21168a2fb196d6b3df59e43b66c55ffa70880e85b45b26f23e461cd957ff67011317b9a9e3f8fdf59b1ddd3fc74d51779dcd870545123b06d85bc35b20d042567d7cf092d103d70cc94eb971b4867c55d8b27886b02188b2b498213cc638957fe79cd670f8d3fb9faf47d784a7289f74df9d23cbb6cdac87e2ff6891bb4ee0dfc77e938645eff1d33d33cbedd275f1702f20b0ae06946f4bacba120a203404e7f823098bde60c878100a1553d43899269f4bd6625695cc5be1339037277a9ee756b47fa20df8467f2ca71b6b043dee396304e8a989cb61c3bcf959a72cd6ed2d1688b516c31ee703c3194e7c3235426fb6f306a763a8521fa0bf28ff49d31869ccfbf0a8d59d532fc2e0f4677c1fe9fac653b7208cd5c725c75166ccb8d188c6b24a4ef5b4338a315ec1bd9d863fa5e77a81044333ded92c7048df0848b159df081c78b07ceecf2089c47fec908e8f7f1b613c15a64595b35ae655dfb7c8fc7a7dcd7219a217d2034061e884218ef9be929bcf31dff15eb3bcc05a28b831a14fd91d53ecaa78f36ce066bc1c873547b681e3d387c8ccb4a8d38f6043772969ebeb825cfdcab4380dcab2b7d9f5d14df28dfe08ad9a0928c43495d4873c867cadc0af66eebaeba9683c08a5c39ad4ab0000000000000000000000000000000000000000000000000000000000000001185b61ea5b286b14054e98deab8f08f1be980188a3705d659fa7a2ec3af3cc5e29a8d8687d2676ec070ca937bf802910fb784f843c96f7bffbf5534ee0829740634702084b8d70da53297129e900dc8fe3779080d109b8d829733f71902d29c0530464a7caa8fb17cc550b985162babb47d751aa429d05e6ca0085e0c1f912022de90109224b45bae9de2de60ca0e6573d56cbe759c8c97550a21c8ce6227477f89220b31778ed2e33e886bf987b5375cad62372483d9d63c3484462ad0f710614f99985fea76aeacee5cecb5ab9dbca66d8eb545ed2627330c33dba5ebcfc42ea562bd00764f0c05a029f39a84ce95f87f55cac6b2e55563a4e16685a8ffd7f58806d91bb43e6fd51e2df2f6da606bca13e37b0addb6d5f882ef116b6466b01de3985e8f8da77837ac2e9b0f114ebe3ebdaf1184dc5931fab740f2c9dd4b4b87b0fa823f601982c4a7144537307d1fcf674bfc3562afeb0f2f6e07ad45d982db4d55142636bd68ec7ee9a9dc5bb1be7abf0fc0296f505ffafdf22c7a54cfbf1659d1558027aaf4dd855179291a1c6fce405d3643a23fd628ce6cfd128cbc3cb7b9bbb92e0339611016c6b3a71837878b1bc7bd9b435e4ca74f01e6f2006698915cce4d77a98a4f08d210215c6394908535fe032aa648e82e038032fd195f6dcb997448c98af88de73f34f34d161a2407c8e5711a47ad0f1ad8e0501a0b78a8b8b24bf488f23587a6ce6824dc0bd910aab3612127c9972fd3fcf6ad9bf1ce9da4000000000000000000000000000000000000000000000000000000000000000fcff4cb5c7ce06cbb35f185d3dbba9303057e2758779618999cb4ba1b73632e90571a464631ff514ed60444f9f90c6e657dca7d406953933a584b792ea85c8a99661653395a95c2aa22a3cabcad352979f6aca65743ff60b15ebd181b10ed4511302dd51eaee0876ed54eb4e66ea5347e58eaeaecd2c7e3c2857726b687883b29abdd04b5f021a4e840d8ddf8ff04e6ee00416d380bae0fe090deb9bef9d8a9a34c8fb3f64b293a1401c6148afd965e251c49de64339c3afdbaa70490dfbc966aa4ecf9d5517513dd957231479c31cb397686c7f0b431ebfa39555ba75ed16f8ae4ebc2e89d67b25c835142afd99d4a7fe6d8891da8a18ef665336d89936a938dffcca7fb6a0b33f42ba3bc7fc4f5d6ecd29dff28d5c7ccdd038bc3adaf0b1ba888454136041cf17755c0f3b6e879dad6cebab5b17d040f3313a2b266dfe578e5335ad5463022b3cd4fe56db940cf9d276a00f8a2b913aefa22341705db51f08de40307a091f9daff0099a2b89a70d57c844526721ce36eef6b206db07eb4b362b91b29634b1e446237f4c1b3482bb319f6310e4aa0e368a7d54a533cd8f7befa681e3d387c8ccb4a8d38f6043772969ebeb825cfdcab4380dcab2b7d9f5d14df28dfe08ad9a0928c43495d4873c867cadc0af66eebaeba9683c08a5c39ad4ab0",
    "from": "0x3350bef226f7bdca874c5561320ab7ef9dc89e70",
    "gas": "0x2767b0",
    "gasPrice": "0x2719c40",
    "nonce": "0x1",
    "to": "0x3ef3d8ba38ebe18db133cec108f4d14ce00dd9ae",
    "value": "0x0"
}

   */
}

main().catch(error => {
  console.error(error);
  process.exit(1);
});
